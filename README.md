**fpman**
----------
manpages for Free Pascal Compiler.


**Why and how?**
----------
Mostly because I grew fed up with having to read FPC documentation in the 
browser and thought to myself *"wouldn't it be nice to have manpages?"*
Y'know, instead of having to click and manuever through the index files,
being able to just type in the subject and have the appropriate manpage 
appear right there in the terminal.

*fpman* works by performing crude string matching on HTML files generated by 
*fpdoc* in order to convert them into troff files, which *man* can read. 
It then stores the converted pages in the user's home directory, 
keeping a list of pages in an SQLite database for quick searching.


**Wouldn't it make more sense to add troff output to fpdoc?**
----------
Probably, yeah. But as we all know, working with other people's code takes 
some diving in, whereas if you code your own stuff, you can start hacking
right away - and my lazy ass didn't really feel like going into *fpdoc* 
source. That is to say, I may consider working on troff output for *fpdoc* 
in the future.

Still, even if *fpdoc* could output troff, you'd still need for the documentation 
maintainer to provide you with the .man files to use (or generate them 
yourself, if you have both the `.pas` sources and `.xml` docs). By mutilating 
HTML files, *fpman* is able to provide manpages without the need for anyone to 
do any extra work on the docs.


**Dependencies**
----------
Quite obviously, *fpman* requires `man` to run. `sqlite3` is used for, well,
manipulation on the page database. Also, `rm` is required, but I'd be 
seriously worried about the state of your system if that wasn't available.


**Usage**
----------
```
Usage: fpman OPTION | PAGE
  --help               Display this help list.

  --import=PATH        Imports .html or .man documentation files from PATH
                       to fpman library. PATH can specify either a single file
                       to import, or a directory to scan for files. 
                       Subdirectories will be scanned recursively.

  --purge              Cleans fpman library directory and sqlite database.
 
  --rebuild            Rebuilds fpman sqlite database based on files found
                       in the library directory.

  --revalidate         Like --rebuild, but instead of recreating the database
                       from scratch, takes all entries and checks if their
                       manpages are still in library, removing dead entries.

  --version            Displays version information and exists.
```
To get started with *fpman*, you can either download FPC documentation in 
HTML format from ** [here](http://freepascal.org/down/docs/docs.var) ** and 
run `fpman --import`, or clone this repo and either run `fpman --import` on
the pre-converted pages, or copy the whole `pages/` directory to
`~/.suve/fpman/` and then run `fpman --rebuild`. 

**Note:** Import / rebuild will probably take a couple of minutes due to
database code being quite unoptimised. This will be improved in the future.

Once you've got some manpages imported, just run `fpman PAGE` and the 
program will search its library for your desired topic. The search is 
case-insensitive. To avoid ambiguity, you can prefix the page with 
the name of the unit, e.g. `fpman system.read`. 


**Building**
----------
*fpman*, as a tool for Free Pascal enthusiasts, is also written in Pascal. 
Thus, you're going to need a Pascal compiler (for obvious reasons, 
I recommend FPC) and also the dev packages for `sqlite3`.

In Fedora, you can do this by running (don't forget root):
```
yum install fpc sqlite-devel
```

Or, if you're using Ubuntu:
```
apt-get install fpc libsqlite3-dev
```

No additional steps are needed before compiling, so you can just tap in
`fpc fpman.pas`. Or, of you insist on using make:
```
cd src/
make release
```

**Note**: sometimes when recompiling, FPC seems to have problems with
the program's use of generics and simply crashes. This can be worked around 
by simply running `make clean`, forcing a full recompile.

**License**
-----------
*fpman* is available under the terms of a slightly modified zlib license.
For full text of the license, check `LICENSE.txt`.
